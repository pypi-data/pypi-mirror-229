import{d as j,V as q,v as z,r as m,E as w,c as r,W as K,X as P,Y as Q,Z,$,b,e as t,w as c,o as s,j as a,u as e,a0 as G,i as C,K as I,F as g,a1 as J,k as F,a2 as ee,g as i,N as _,a3 as se,a4 as oe,a5 as te,a6 as le,a7 as ne,a8 as ae,a9 as ue,aa as re,D as ce,n as ie,ab as de}from"./index-af9a0126.js";import{u as fe}from"./usePageTitle-f8d5ba55.js";const pe={class:"flow-runs__list"},me={class:"flow-runs__list-controls--right"},ke=j({__name:"FlowRuns",setup(we){const h=q(),d=z(),v=m(),R=w(d.flowRuns.getFlowRunsCount,[{}]),V=r(()=>R.executed),S=r(()=>R.response===0),f=m(),x=K(f,1200),{filter:o,isCustomFilter:B}=P({flowRuns:{nameLike:x}}),p={interval:3e4},k=w(d.flowRuns.getFlowRunsCount,[o],p),N=r(()=>k.response),T=w(d.ui.getFlowRunHistory,[o],p),D=r(()=>T.response??[]),{flowRuns:y,subscriptions:U,loadMore:A}=Q(o,p),l=m([]),{margin:E}=Z(),H=()=>({rootMargin:E.value}),{stuck:L}=$(v,H),M=r(()=>({listControls:{"flow-runs__list-controls--stuck":L.value}}));function O(){h.push(de.flowRuns())}const W=()=>{l.value=[],U.refresh(),k.refresh()};return fe("Flow Runs"),(_e,n)=>{const X=b("p-button"),Y=b("p-layout-default");return s(),t(Y,{class:"flow-runs"},{header:c(()=>[a(e(G))]),default:c(()=>[V.value?(s(),C(g,{key:0},[S.value?(s(),t(e(I),{key:0})):(s(),C(g,{key:1},[a(e(J)),e(F).md?(s(),t(e(ee),{key:0,history:D.value,"start-date":e(o).flowRuns.expectedStartTimeAfter,"end-date":e(o).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):i("",!0),_("div",pe,[_("div",{ref_key:"listControls",ref:v,class:se(["flow-runs__list-controls",M.value.listControls])},[_("div",me,[l.value.length==0?(s(),t(e(oe),{key:0,count:N.value,label:"Flow run"},null,8,["count"])):(s(),t(e(te),{key:1,count:l.value.length},null,8,["count"])),a(e(le),{selected:l.value,onDelete:W},null,8,["selected"])]),e(F).md?(s(),t(e(ne),{key:0,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=u=>f.value=u),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):i("",!0),a(e(ae),{modelValue:e(o).sort,"onUpdate:modelValue":n[1]||(n[1]=u=>e(o).sort=u)},null,8,["modelValue"])],2),a(e(ue),{selected:l.value,"onUpdate:selected":n[2]||(n[2]=u=>l.value=u),selectable:"","flow-runs":e(y),onBottom:e(A)},null,8,["selected","flow-runs","onBottom"]),e(y).length?i("",!0):(s(),t(e(re),{key:0},ce({_:2},[e(B)?{name:"actions",fn:c(()=>[a(X,{small:"",onClick:O},{default:c(()=>[ie(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):i("",!0)]),_:1})}}});export{ke as default};
