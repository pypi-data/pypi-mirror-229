import{j as e,a as g,e as j,r as i,v as u,ag as p,aq as w,at as h,P as x,p as m,t as f,l as y,aC as v,aD as R,aE as S,aG as b,aV as P,R as E,aX as F,aY as H,aZ as N,h as k,V as C}from"./index-7069f3e8.js";import{o as D,b3 as I,aI as M,Z as T,w as U,a$ as z,ah as B,aG as L,aH as q,b2 as W}from"./index-6d7dc09d.js";function Z(){const{query:t}=D(),{rid:s}=t||{},a=I(s),{data:r}=a;return e.jsxs("div",{className:"flex flex-column flex-1",children:[e.jsx("h1",{className:"mb-20px",style:{fontSize:"2.4em",fontWeight:600,color:"#02102B"},children:r?.title||""}),e.jsxs("div",{className:"flex gap-10px items-center font-14px",children:[e.jsxs("div",{className:"flex gap-5px",children:[e.jsx(M,{name:a.data?.owner?.name,size:28}),e.jsx(T,{user:a.data?.owner}),"|"," "]}),e.jsxs("span",{style:{color:"rgba(2,16,43,0.60)"},children:[e.jsx(g,{type:"time",style:{marginRight:"4px"}}),U(r?.createdTime||Date.now())]})]}),e.jsx("p",{className:"mt-20px",style:{fontSize:"16px",color:"#02102B"},children:r?.description||""}),e.jsx("div",{className:"mb-20px flex-1",children:e.jsx(z,{id:s,initialContent:r?.content,editable:!1})})]})}function A(){const t=j(),s=5,a=i.useRef({}),r=i.useRef(t.pathname),[c]=u();return B(()=>{p.interceptors.response.handlers.length>1||p.interceptors.response.use(n=>n,n=>{if(n.config.url?.includes(`${w}/alive`)||n.response.config.params?.silent)return Promise.reject(n);const l={autoHideDuration:(s+1)*1e3,overrides:{InnerContainer:{style:{wordBreak:"break-word",width:"100%"}}},key:"api-header"};if(n.response?.status===400){const d=h(n);return d&&x.negative(d,l),Promise.reject(n)}const o=h(n);return Date.now()-(a.current[o]||0)>s*1e3&&(x.negative(o.length<100?o:e.jsx(e.Fragment,{children:e.jsxs("details",{children:[e.jsx("summary",{children:c("something wrong with the server")}),o]})}),l),a.current[o]=Date.now()),Promise.reject(n)})}),i.useEffect(()=>{r.current!==t.pathname&&(a.current={}),r.current=t.pathname},[t.pathname]),e.jsx(e.Fragment,{})}const G=m({headerWrapper:t=>({padding:"0 20px 0 0",height:`${b}px`,width:"100%",display:"flex",flexFlow:"row nowrap",alignItems:"center",color:t.theme.colors.contentPrimary,backgroundColor:t.theme.brandBgNav,position:"relative",zIndex:10})});function $(){const[,t]=f(),s=G({theme:t}),a=i.useContext(y),[r]=u(),c=v.language==="zh";return e.jsxs("header",{className:s.headerWrapper,children:[e.jsx(L,{expanded:a.expanded}),e.jsx("div",{style:{flexGrow:1}}),e.jsxs("div",{style:{flexShrink:0,display:"flex",alignItems:"center",gap:"4px",marginRight:"16px"},children:[e.jsx(q,{}),e.jsx("a",{target:"_blank",rel:"noreferrer",href:c?R:S,style:{color:"#FFF",textDecoration:"none",lineHeight:"20px"},children:r("docs")})]})]})}const V=m({root:({theme:t})=>({display:"flex",flexFlow:"column nowrap",height:"100vh",width:"100vw",position:"relative",color:t.colors.contentPrimary})}),_={auth:!1,component:W,routes:[{path:"/simple/report/preview",component:Z},{to:"/projects/:path?",target:"_blank",component:C}]},Q=()=>{const t=k();return i.useEffect(()=>{t?.listen(s=>{s.pathname.startsWith("simple")||window.location.reload()})},[t]),null},O=()=>{const[,t]=f(),s=V({theme:t}),a=P(_);return e.jsx(E.Suspense,{fallback:e.jsx(F,{}),children:e.jsx(H,{children:e.jsx("div",{className:s.root,children:e.jsxs(N,{children:[e.jsx(A,{}),e.jsx($,{}),a,e.jsx(Q,{})]})})})})};export{O as default};
