<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" href="/images/favicon-32x32.png">
    <link rel="stylesheet" href="/css/mvp.css">

    <meta charset="utf-8">
    <meta name="description" content="CB2 NLP Research">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>CB2 Login Page</title>


    <style type="text/css">
        .banner-background {
            position: relative;
            top: 0; left: 0;
            width: 100%;
            background: linear-gradient(180deg, #c9e6ff 30%, #fff 100%);
            opacity: 1;
            z-index: -1;
            margin-bottom: -30%;

            bottom: 0;
            left: 0;
            padding-top: 50px;
            right: 0;
            top: 0;
            z-index: -1;
        }

        .banner-background .x1 {
            opacity: 60%;
        }

        .banner-background .x2 {
            opacity: 40%;
        }

        .banner-background .x3 {
            opacity: 20%;
        }

        .banner-background .x4 {
            opacity: 10%;
        }

        .banner-background .x5 {
            opacity: 5%;
        }

        .banner-background .x6 {
            opacity: 2%;
        }

        /* KEYFRAMES */

        @-webkit-keyframes animateCloud {
            0% {
                margin-left: -1000px;
            }
            100% {
                margin-left: 100%;
            }
        }

        @-moz-keyframes animateCloud {
            0% {
                margin-left: -1000px;
            }
            100% {
                margin-left: 100%;
            }
        }

        @keyframes animateCloud {
            0% {
                margin-left: -1000px;
            }
            100% {
                margin-left: 100%;
            }
        }

        /* ANIMATIONS */

        .x1 {
            -webkit-animation: animateCloud 70s linear infinite;
            -moz-animation: animateCloud 70s linear infinite;
            animation: animateCloud 70s linear infinite;

            -webkit-transform: scale(0.65);
            -moz-transform: scale(0.65);
            transform: scale(0.65);
        }

        .x2 {
            -webkit-animation: animateCloud 45s linear infinite;
            -moz-animation: animateCloud 45s linear infinite;
            animation: animateCloud 45s linear infinite;

            -webkit-transform: scale(0.3);
            -moz-transform: scale(0.3);
            transform: scale(0.3);
        }

        .x3 {
            -webkit-animation: animateCloud 55s linear infinite;
            -moz-animation: animateCloud 55s linear infinite;
            animation: animateCloud 55s linear infinite;

            -webkit-transform: scale(0.5);
            -moz-transform: scale(0.5);
            transform: scale(0.5);
        }

        .x4 {
            -webkit-animation: animateCloud 43s linear infinite;
            -moz-animation: animateCloud 43s linear infinite;
            animation: animateCloud 43s linear infinite;

            -webkit-transform: scale(0.4);
            -moz-transform: scale(0.4);
            transform: scale(0.4);
        }

        .x5 {
            -webkit-animation: animateCloud 50s linear infinite;
            -moz-animation: animateCloud 50s linear infinite;
            animation: animateCloud 50s linear infinite;

            -webkit-transform: scale(0.55);
            -moz-transform: scale(0.55);
            transform: scale(0.55);
        }

        /* OBJECTS */

        .cloud {
            background: #fff;
            background: -moz-linear-gradient(top,  #fff 5%, #f1f1f1 100%);
            background: -webkit-gradient(linear, left top, left bottom, color-stop(5%,#fff), color-stop(100%,#f1f1f1));
            background: -webkit-linear-gradient(top,  #fff 5%,#f1f1f1 100%);
            background: -o-linear-gradient(top,  #fff 5%,#f1f1f1 100%);
            background: -ms-linear-gradient(top,  #fff 5%,#f1f1f1 100%);
            background: linear-gradient(top,  #fff 5%,#f1f1f1 100%);
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fff', endColorstr='#f1f1f1',GradientType=0 );

            -webkit-border-radius: 100px;
            -moz-border-radius: 100px;
            border-radius: 100px;

            -webkit-box-shadow: 0 8px 5px rgba(0, 0, 0, 0.1);
            -moz-box-shadow: 0 8px 5px rgba(0, 0, 0, 0.1);
            box-shadow: 0 8px 5px rgba(0, 0, 0, 0.1);

            height: 120px;
            position: relative;
            width: 350px;
        }

        .cloud:after, .cloud:before {
            background: #fff;
            content: '';
            position: absolute;
            z-indeX: -1;
        }

        .cloud:after {
            -webkit-border-radius: 100px;
            -moz-border-radius: 100px;
            border-radius: 100px;

            height: 100px;
            left: 50px;
            top: -50px;
            width: 100px;
        }

        .cloud:before {
            -webkit-border-radius: 200px;
            -moz-border-radius: 200px;
            border-radius: 200px;

            width: 180px;
            height: 180px;
            right: 50px;
            top: -90px;
        }
    </style>
    <script type="text/javascript">
        // Resize the banner to cover just the header.
        function resize_banner() {
            var banner = document.querySelector('.banner-background');

            // If the banner hasn't loaded yet, return.
            if (banner === null) {
                return;
            }

            // Width is window size.
            banner.style.width = window.innerWidth + 'px';
            banner.style.height = document.querySelector('header').clientHeight * 1.5 + 'px';

            // Make the banner have a negative bottom margin to cover the header.
            banner.style.marginBottom = -document.querySelector('.banner-background').clientHeight + 'px';
        }

        window.addEventListener('load', function() {
            var banner = document.querySelector('.banner-background');

            // Resize the banner on window resize.
            window.addEventListener('resize', resize_banner);
            // Resize the banner on page load.
            resize_banner();
        });

        var header = document.querySelector('header');
        var banner = document.querySelector('.banner-background');
        // When the header has loaded, set the banner to be the same height as the header.
        if (banner != null) {
            banner.addEventListener('load', function() {
                resize_banner();
            });
        }
        if (header != null) {
            header.addEventListener('load', function() {
                resize_banner();
            });
        }
    </script>
</head>

<body>
    <div class="banner-background">
        <div style="height: 10%;"></div>
        <div class="x1">
            <div class="cloud"></div>
        </div>

        <div class="x2">
            <div class="cloud"></div>
        </div>

        <div class="x3">
            <div class="cloud"></div>
        </div>

        <div class="x4">
            <div class="cloud"></div>
        </div>

        <div class="x5">
            <div class="cloud"></div>
        </div>
    </div>
    <header style="margin-bottom: 0; padding-bottom: 24px;">
        <nav>
            <a href="/"><img alt="Logo" src="images/icon_small.png" height="70"></a>
            <ul>
                <li>
                    <a href="https://arxiv.org/abs/2303.08127">Paper</a>
                </li>
                <li>
                    <a href="https://github.com/lil-lab/cb2/wiki">Docs</a>
                </li>
                <li>
                    <a href="https://github.com/lil-lab/cb2">CB2 on Github â†—</a>
                </li>
            </ul>
        </nav>
        <h1>CB2 Login Page</h1>
        <p>You are trying to access a password-protected page. Please enter the server password below.</p>
        <p>You must authenticate at least every week.</p>
    </header>
    <script type="text/javascript"> resize_banner(); </script>
    <main style="margin-top: 0; padding-top: 24px;">
        <section>
            <!-- AJAX HTTP form. -->
            <form id="auth_form" action="auth" method="post">
                <p id="submission_status"></p>
                <input type="password" name="password" placeholder="Password" autocomplete="current-password" required>
                <input type="submit" value="Login">
            </form>
        </section>
        <script type="text/javascript">
            // Check

            // AJAX form submission.
            var form = document.getElementById('auth_form');
            form.addEventListener('submit', function(event) {
                event.preventDefault();

                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/auth', true);
                // Add the HTTP Basic Auth header using the password in the form.
                xhr.setRequestHeader("Authorization", "Basic " + btoa(":" + form.password.value));
                // Don't include the password in the URL/Request payload.
                form.password.value = '';

                xhr.onload = function() {
                    if (xhr.status === 200) {
                        // Redirect to the page the user was trying to access -- in the "next=" url parameter.
                        document.getElementById('submission_status').innerHTML = 'Success! Redirecting...';
                        var url = new URL(window.location.href);
                        var next = url.searchParams.get("next");
                        if (next == null) {
                            next = '/';
                        }
                        window.location.replace(next);
                    } else {
                        document.getElementById('submission_status').innerHTML = 'Incorrect password. Please try again...';
                    }
                };
                xhr.send();
            });
        </script>
    </main>
    <footer>
        <p>
            <small>The Cornell Language, Interaction, and Learning Lab</small>
            <br>
            <small><a href="/privacy">Privacy Policy</a></small>
        </p>
    </footer>
</body>

</html>
