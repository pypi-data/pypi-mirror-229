"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4786,3624],{3744:(e,t)=>{t.Z=(e,t)=>{const s=e.__vccOpts||e;for(const[e,r]of t)s[e]=r;return s}},112:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var r=s(6252),a=s(3577);const l={class:"card search-card"},i={class:"card-body"},c=(0,r._)("hr",null,null,-1),o={class:"table"},n={width:"75%"},u=(0,r._)("td",{width:"25%"},"Status",-1),h=["href"],d=(0,r._)("div",{class:"spacer"},null,-1),p={class:"small-text"};var b=s(989);const m={name:"ListSearchResults",props:{destination:{type:String,default:""},importVariables:{type:Object,default:()=>({header:"",prefix:"",id:0,title:"",status:""})},searchResults:{type:Array,default:()=>[]}},computed:{...(0,b.Se)({rootUrl:"getRootUrl"})}},_=(0,s(3744).Z)(m,[["render",function(e,t,s,b,m,_){return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",i,[(0,r._)("h2",null,(0,a.toDisplayString)(s.importVariables.header)+" Search Results",1),c,(0,r.kq)(" TABLE OF DATA "),(0,r._)("table",o,[(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("td",n,(0,a.toDisplayString)(s.importVariables.header),1),u])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.searchResults,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t[s.importVariables.id]},[(0,r._)("td",null,[(0,r.kq)(" LINK "),(0,r._)("a",{href:`${e.rootUrl}${s.destination}_information/${t[s.importVariables.id]}/`},[(0,r._)("p",null,(0,a.toDisplayString)(t[s.importVariables.title]),1),d,(0,r._)("p",p,(0,a.toDisplayString)(s.importVariables.prefix)+(0,a.toDisplayString)(t[s.importVariables.id]),1)],8,h)]),(0,r._)("td",null,[(0,r.kq)(" STATUS "),(0,r.Uk)(" "+(0,a.toDisplayString)(t[s.importVariables.status]),1)])])))),128))])])])])}]])},2403:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var r=s(6252),a=s(9963);const l={class:"card"},i={class:"card-body"},c=(0,r._)("h1",null,"Search",-1),o=(0,r._)("hr",null,null,-1),n={class:"form-row"},u={class:"form-group"},h=(0,r._)("label",null,"Search:",-1),d={class:"form-group"},p=(0,r._)("label",{for:"inlcudeClosedObjects"}," Include Closed Objects",-1),b=(0,r._)("br",null,null,-1),m={key:5,class:"alert alert-warning"};var _=s(9113),f=s(112);const S=s(9669),k={name:"SearchObjects",components:{ListSearchResults:f.default},props:{includeClosed:{type:Boolean,default:!1},rootUrl:{type:String,default:"/"},searchInput:{type:String,required:!1,default:""},searchResults:{type:Object,required:!0,default:()=>({})}},mixins:[_.Z],data(){return{includeClosedObjectsModel:this.includeClosed,kanbanVariables:{header:"Kanban",prefix:"Kb",id:"kanban_board_id",title:"kanban_board_name",status:"kanban_board_status"},localSearchResults:this.searchResults,projectVariables:{header:"Projects",prefix:"Pro",id:"project_id",title:"project_name",status:"project_status"},requestForChangeVariables:{header:"Request for Change",prefix:"Rfc",id:"rfc_id",title:"rfc_title",status:"rfc_status__rfc_status"},requirementVariables:{header:"Requirements",prefix:"Req",id:"requirement_id",title:"requirement_title",status:"requirement_status__requirement_status"},searchModel:this.searchInput,searchTimeout:"",taskVariables:{header:"Tasks",prefix:"Task",id:"task_id",title:"task_short_description",status:"task_status"}}},methods:{getSearchResults(){const e=new FormData;e.set("search",this.searchModel),e.set("include_closed",this.includeClosedObjectsModel),S.post(`${this.rootUrl}search/data/`,e).then((e=>{this.localSearchResults=e.data})).catch((e=>{}))}},watch:{includeClosedObjectsModel(){""!=this.searchTimeout&&clearTimeout(this.searchTimeout),this.getSearchResults()},searchModel(){this.searchTrigger({return_function:this.getSearchResults,searchTimeout:this.searchTimeout})}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),null==this.includeClosed&&(this.includeClosedObjectsModel=!1)}},g=(0,s(3744).Z)(k,[["render",function(e,t,s,_,f,S){const k=(0,r.up)("list-search-results");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",l,[(0,r._)("div",i,[(0,r.kq)(" HEADING "),c,o,(0,r.kq)(" SEARCH FIELD "),(0,r._)("div",n,[(0,r._)("div",u,[h,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>f.searchModel=e),maxlength:"250"},null,512),[[a.vModelText,f.searchModel]])]),(0,r._)("div",d,[(0,r.wy)((0,r._)("input",{type:"checkbox",id:"inlcudeClosedObjects","onUpdate:modelValue":t[1]||(t[1]=e=>f.includeClosedObjectsModel=e)},null,512),[[a.vModelCheckbox,f.includeClosedObjectsModel]]),p])])])]),b,(0,r.kq)(" REQUEST FOR CHANGE RESULTS "),f.localSearchResults.request_for_change.length>0?((0,r.wg)(),(0,r.j4)(k,{key:0,"search-results":f.localSearchResults.request_for_change,"import-variables":f.requestForChangeVariables,destination:"rfc"},null,8,["search-results","import-variables"])):(0,r.kq)("v-if",!0),(0,r.kq)(" REQUIREMENTS RESULTS "),f.localSearchResults.requirement.length>0?((0,r.wg)(),(0,r.j4)(k,{key:1,"search-results":f.localSearchResults.requirement,"import-variables":f.requirementVariables,destination:"requirement"},null,8,["search-results","import-variables"])):(0,r.kq)("v-if",!0),(0,r.kq)(" PROJECT RESULTS "),f.localSearchResults.project.length>0?((0,r.wg)(),(0,r.j4)(k,{key:2,"search-results":f.localSearchResults.project,"import-variables":f.projectVariables,destination:"project"},null,8,["search-results","import-variables"])):(0,r.kq)("v-if",!0),(0,r.kq)(" TASK RESULTS "),f.localSearchResults.task.length>0?((0,r.wg)(),(0,r.j4)(k,{key:3,"search-results":f.localSearchResults.task,"import-variables":f.taskVariables,destination:"task"},null,8,["search-results","import-variables"])):(0,r.kq)("v-if",!0),(0,r.kq)(" KANBAN RESULTS "),f.localSearchResults.kanban.length>0?((0,r.wg)(),(0,r.j4)(k,{key:4,"search-results":f.localSearchResults.kanban,"import-variables":f.kanbanVariables,destination:"kanban"},null,8,["search-results","import-variables"])):(0,r.kq)("v-if",!0),(0,r.kq)(" WHEN THERE ARE NO RESULTS "),f.localSearchResults.requirement.length+f.localSearchResults.project.length+f.localSearchResults.task.length+f.localSearchResults.request_for_change==0?((0,r.wg)(),(0,r.iD)("div",m," Sorry - but there are no results for this search term. Please try searching for a different search term. ")):(0,r.kq)("v-if",!0)])}]])},9113:(e,t,s)=>{s.d(t,{Z:()=>r});const r={methods:{searchTrigger(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);