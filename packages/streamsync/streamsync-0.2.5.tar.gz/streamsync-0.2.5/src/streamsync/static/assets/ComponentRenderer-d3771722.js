import{d as j,i as B,b as y,q as ce,c as g,o as $,e as x,f as n,t as T,l as X,_ as F,S as ie,r as E,U as S,E as L,V as A,Q as Y,W as re,G as de,w as U,v as G,h as ue,F as pe,y as _e,n as q,p as Q,j as J,k as ve,s as me,x as fe,R as ge}from"./index-5349faf2.js";const he={class:"ChildlessPlaceholder"},ye={class:"content"},Ce={class:"title"},be={key:0,class:"message"},Ie=10,Se=j({__name:"ChildlessPlaceholder",props:{componentId:{}},setup(p){const a=p,i=B(y.core),{componentId:l}=ce(a),s=g(()=>i.getComponentById(l.value)),P=g(()=>i.getComponentDefinition(s.value.type)),m=(C,b)=>{const e=C.map(c=>i.getComponentDefinition(c)).map(c=>c==null?void 0:c.name);return`${e.slice(0,-1).join(", ")} ${e.length>1?b:""} ${e.at(-1)}`},_=g(()=>{const C=i.getContainableTypes(l.value);let b;return C.length<=Ie&&(b=`You can add ${m(C,"and")} components`),b});return(C,b)=>($(),x("div",he,[n("div",ye,[n("div",Ce,[n("h2",null,"Empty "+T(P.value.name),1)]),_.value?($(),x("div",be,T(_.value),1)):X("",!0)])]))}});const Pe=F(Se,[["__scopeId","data-v-b958fd6f"]]),$e={props:["componentId","instancePath","instanceData"],setup(p){const a=B(y.core),i=B(y.builderManager),l=p.componentId,s=g(()=>a.getComponentById(l)),P=ie(s.value.type),m=p.instancePath,_=p.instanceData,{getEvaluatedFields:C,isComponentVisible:b}=Y(a),r=C(m),e=g(()=>a.getComponents(l,!0)),d=g(()=>!!i&&i.getMode()!="preview"),c=E(!1),V=g(()=>a.getUserFunctions()),w=()=>{if(!(e.value.length>0))return A(Pe,{componentId:s.value.id})},M=(t,o=0)=>A(Z,{componentId:t,key:`${t}:${o}`,instancePath:[...m,{componentId:t,instanceNumber:o}],instanceData:[..._,E(null)]}),K=(t=0,o=()=>!0,f=!1)=>{const v=h=>A("div",{"data-streamsync-slot-of-id":l,"data-streamsync-position":h}),u=d.value&&!f,I=e.value.filter(o).map((h,D)=>[M(h.id,t),...u?[v(D+1)]:[]]);return[...u?[v(0)]:[]].concat(I.flat())};S(y.evaluatedFields,r),S(y.componentId,l),S(y.isBeingEdited,d),S(y.isDisabled,c),S(y.instancePath,m),S(y.instanceData,_),S(y.renderProxiedComponent,M),S(y.getChildrenVNodes,K);const ee={"data-streamsync-id":l,"data-streamsync-instance-path":(t=>t.map(o=>`${o.componentId}:${o.instanceNumber}`).join(","))(m)},k=E(!1);L(()=>(i==null?void 0:i.getSelectedId())==l,t=>{k.value=t}),L(()=>r,()=>{k.value=!1},{deep:!0});const W=g(()=>e.value.length==0),te=g(()=>b(l,m)),se=(t,o)=>{if(!t.startsWith("$")&&!o)return v=>{let u=!1;V.value.some(I=>I.name==t&&I.args.includes("payload"))&&(u=!0),a.forwardEvent(v,m,u)};if(t.startsWith("$goToPage_")){const v=t.substring(10);return u=>a.setActivePageFromKey(v)}return null},ne=g(()=>{const t={},o=Object.keys(s.value.handlers??{}),f=s.value.binding?[s.value.binding.eventType]:[];return Array.from(new Set([...o,...f])).forEach(u=>{var D;const I=`on${u.charAt(0).toUpperCase()}${u.slice(1)}`,h=u===((D=s.value.binding)==null?void 0:D.eventType);t[I]=N=>{var H,O;h&&a.forwardEvent(N,m,!0);const z=(H=s.value.handlers)==null?void 0:H[u];z&&((O=se(z,h))==null||O(N))}}),t}),oe=g(()=>{var f;const t=(f=a.getComponentDefinition(s.value.type))==null?void 0:f.fields;if(!t)return;const o={};return Object.keys(t).forEach(v=>{t[v].applyStyleVariable&&r[v]&&(o[`--${v}`]=r[v].value)}),o}),ae=g(()=>{var I;const t="cssClasses",o=(I=a.getComponentDefinition(s.value.type))==null?void 0:I.fields;if(!o||!o[t]||!r[t])return;const f=r[t].value,v=f==null?void 0:f.split(" ").map(h=>h.trim()),u={};return v.forEach(h=>{u[h]=!0}),u}),le=function(){return{class:{component:!0,childless:W.value,selected:k.value,disabled:c.value,...ae.value},style:{...oe.value,...te.value?{}:{display:"none"}},...ee,...c.value?[]:ne.value,draggable:d.value}};return()=>{const t=d.value?w():void 0,o=({instanceNumber:u=0,componentFilter:I=()=>!0,positionlessSlot:h=!1})=>W.value?h?void 0:t:K(u,I,h),f={...le()};return A(P,f,{default:o})}}};const Z=F($e,[["__scopeId","data-v-2c07e8c1"]]),R=p=>(Q("data-v-cbbb395f"),p=p(),J(),p),Ee=R(()=>n("i",{class:"ri-notification-2-line ri-xl"},null,-1)),Te={class:"counter"},xe=R(()=>n("div",{class:"balloonFlash"},null,-1)),Me={class:"main"},De=R(()=>n("i",{class:"ri-close-line"},null,-1)),Be=R(()=>n("i",{class:"ri-error-warning-fill ri-xl"},null,-1)),Ve=[Be],we={class:"content"},Ae={class:"title"},Fe={class:"time"},Re={class:"message"},ke=100,Ne=j({__name:"RendererNotifications",setup(p){const a=B(y.core),i=E(!1),l=E(null),s=re([]),P=C=>{const{type:b,title:r,message:e,code:d}=C;s.unshift({type:b,title:r,message:e,code:d,timestampReceived:new Date}),s.splice(ke),l.value.classList.remove("alert"),l.value.offsetWidth,l.value.classList.add("alert")};de(()=>{a.addMailSubscription("notification",P)});const m=()=>{s.length!=0&&(i.value=!i.value)},_=()=>{s.splice(0),i.value=!1};return(C,b)=>U(($(),x("div",{class:"RendererNotifications",onClick:m},[n("div",{class:"balloon",ref_key:"balloon",ref:l,title:"Toggle notifications"},[Ee,n("div",Te,T(s.length),1)],512),xe,U(n("div",Me,[n("div",{class:"clearContainer"},[n("button",{onClick:_},[De,ue(" Clear all ")])]),($(!0),x(pe,null,_e(s,(r,e)=>($(),x("div",{class:"notification",key:e},[n("div",{class:q(["icon",r.type])},Ve,2),n("div",we,[n("header",null,[n("strong",Ae,T(r.title),1),n("span",Fe,T(r.timestampReceived.toLocaleTimeString()),1)]),n("div",Re,T(r.message),1)])]))),128))],512),[[G,i.value]])],512)),[[G,s.length>0]])}});const Le=F(Ne,[["__scopeId","data-v-cbbb395f"]]),je=p=>(Q("data-v-66685618"),p=p(),J(),p),Ke=je(()=>n("div",{class:"loadingBar"},null,-1)),We={class:"rootComponentArea"},ze=j({__name:"ComponentRenderer",setup(p){const a=B(y.core),i=Y(a),l=a.getComponents();l.length==0&&console.error("No pages found.");const s=[{componentId:"root",instanceNumber:0}],P=[E(null)],m=E(l[0]),_=i.getEvaluatedFields(s),C=g(()=>{var e,d,c,V,w,M;return{"--accentColor":(e=_.accentColor)==null?void 0:e.value,"--emptinessColor":(d=_.emptinessColor)==null?void 0:d.value,"--containerBackgroundColor":(c=_.parentIdBackgroundColor)==null?void 0:c.value,"--primaryTextColor":(V=_.primaryTextColor)==null?void 0:V.value,"--secondaryTextColor":(w=_.secondaryTextColor)==null?void 0:w.value,"--separatorColor":(M=_.separatorColor)==null?void 0:M.value}}),b=g(()=>a.getFrontendMessageMap().size>0);L(()=>{var e;return(e=_.appName)==null?void 0:e.value},e=>{r(e)},{immediate:!0});function r(e){const d=a.getMode();let c;e&&d=="edit"?c=`${e} | Streamsync Builder`:!e&&d=="edit"?c="Streamsync Builder":e&&d=="run"?c=`${e}`:!e&&d=="run"&&(c="Streamsync App"),document.title=c}return(e,d)=>($(),x("main",{class:q(["ComponentRenderer",{loadingActive:b.value}]),tabindex:"-1",style:ge(C.value)},[ve(Le,{class:"notifications"}),Ke,n("div",We,[m.value?($(),me(Z,{key:0,"component-id":m.value.id,"instance-path":s,"instance-data":P},null,8,["component-id"])):X("",!0),fe(e.$slots,"default",{},void 0,!0)])],6))}});const Ue=F(ze,[["__scopeId","data-v-66685618"]]);export{Ue as default};
