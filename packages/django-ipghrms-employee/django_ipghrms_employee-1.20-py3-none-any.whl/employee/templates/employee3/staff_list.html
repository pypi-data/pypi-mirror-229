{% extends "main/layout.html" %}
{% load static %}
{% block content %}
<div class="breadcrumb-holder">
    <div class="container-fluid">
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'emp-dash' %}">PAINEL FUNCIONARIU</a></li>
        {% if page == "unit" %}
            <li class="breadcrumb-item"><a href="{% url 'emp-unit-list' unit.pk %}">{{ unit.code|upper }}</a></li>
        {% endif %}
        <li class="breadcrumb-item active">{{ legend|upper }}</li>
        </ul>
    </div>
</div>
<div class="container-fluid"><br/>
	<div class="row">
		<div class="col-sm-12">
			<div class="card shadow-lg pt-1 border-primary rounded">
            {% if group == "hr" or group == "admin" %}
			{% endif %}
                <div class="card-body">
                    <h5 align="center">FUNCIONARIU & ASSESSOR IHA {{ name|upper }}</h5>
                    <hr/>
                    <section id='no-more-tables'>
                        <table id="example" class="table table-sm responsive" style="width:100%">
                            <thead>
                                <tr>
                                    <th>Nu.</th>
                                    <th>Naran</th>
                                    <th>Sexu</th>
                                    <th>Fatin & Data Moris</th>
                                    <th>Idade</th>
                                    <th>Nasaun</th>
                                    <th>Pojisaun</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for obj in staffs %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>
                                    {% if group == "hr" or group == "admin" %}
                                        <a href="{% url 'emp-detail' obj.employee.hashed %}">{{ obj.employee }}</a>
                                    {% else %}{{ obj.employee }}{% endif %}
                                    </td>
                                    <td>{{ obj.employee.sex }}</td>
                                    <td>{{ obj.employee.place_of_birth }}, {{ obj.employee.date_of_birth }}</td>
									<td>{{ obj.employee.age }}</td>
                                    <td>{{ obj.employee.country.name }}</td>
                                    <td>{{ obj.employee.contract.all.0.category }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </section>
                </div> <!--end card-body-->
			</div> <!--end card-->
		</div> <!--end col-->
	</div> <!--end row-->
</div><!--end container-->
{% endblock %}
{% block scripts %}
<link href="{% static 'main/vendor/datatables/css/buttons.dataTables.min.css' %}" rel="stylesheet">
<link href="{% static 'main/vendor/datatables/css/fixedColumns.dataTables.min.css' %}" rel="stylesheet">

<script src="{% static 'main/vendor/datatables/js/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'main/vendor/datatables/js/jszip.min.js' %}"></script>
<script src="{% static 'main/vendor/datatables/js/pdfmake.min.js' %}"></script>
<script src="{% static 'main/vendor/datatables/js/vfs_fonts.js' %}"></script>
<script src="{% static 'main/vendor/datatables/js/buttons.html5.min.js' %}"></script>
<script src="{% static 'main/vendor/datatables/js/buttons.print.min.js' %}"></script>
<script type="text/javascript">
    $(document).ready( function () {
        var table = $('#example').removeAttr('width').DataTable( {
            "scrollY": "50vh",
            "scrollX": true,
            "scrollCollapse": true,
            "paging": true,
            buttons:[
                {
                    extend: 'excelHtml5', autoFilter: true, sheetName: 'Exported data'
                },
                {
                    extend: 'pdfHtml5', orientation: 'landscape', pageSize: 'LEGAL', messageTop: '',
                },
                {
                    extend: 'print',
                    exportOptions: {columns: ':visible'},
                },
            ],
            dom: 'Bfrtip',
            "deferRender": true
        });
    } );
</script>
{% endblock %}