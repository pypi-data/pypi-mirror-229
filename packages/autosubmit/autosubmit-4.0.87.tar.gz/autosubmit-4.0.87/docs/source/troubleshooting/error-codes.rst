#########################
Error codes and solutions
#########################

Experiment Locked - Critical Error 7000
=======================================
+------------------------------------------------------------------------------------------------------------------------------------------------+
| Code | Details                                                           | Solution                                                            |
+======+===================================================================+=====================================================================+
| 7000 | Experiment is locked due another instance of Autosubmit using it  | Halt other experiment instances //Delete <expid>/tmp/autosubmit.lock|
+------+-------------------------------------------------------------------+---------------------------------------------------------------------+

Database Issues  - Critical Error codes [7001-7005]
===================================================

+------------------------------------------------------------------------------------------------------------------------+
| Code | Details                                       | Solution                                                        |
+======+===============================================+=================================================================+
| 7001 | Connection to the db could not be established | Check if database exist                                         |
+------+-----------------------------------------------+-----------------------------------------------------------------+
| 7002 | Wrong version                                 | Check system sqlite version                                     |
+------+-----------------------------------------------+-----------------------------------------------------------------+
| 7003 | Database doesn't exist                        | Check if database exist                                         |
+------+-----------------------------------------------+-----------------------------------------------------------------+
| 7004 | Can't create a new database                   | Check your user permissions                                     |
+------+-----------------------------------------------+-----------------------------------------------------------------+
| 7005 | AS database is corrupted or locked            | Please, open a new issue ASAP. (If you are on BSC environment)  |
+------+-----------------------------------------------+-----------------------------------------------------------------+
| 7006 | Experiment database not found                 | Please, ask your administrator to run `autosubmit install`      |
+------+-----------------------------------------------+-----------------------------------------------------------------+
| 7007 | Experiment database permissions               | Invalid permissions, ask your administrator to add R/W          |
+------+-----------------------------------------------+-----------------------------------------------------------------+

.. _default_solution_1:

Default Solution
----------------
These issues are usually from server side, please,  ask first in Autosubmit git if you don't have a custom installation.

----

Wrong User Input  - Critical Error codes [7010-7030]
====================================================

+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| Code | Details                                              | Solution                                                                                       |
+======+======================================================+================================================================================================+
| 7010 | Experiment has been halted in a manual way                                                                                                            |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 7011 | Wrong arguments for an specific command              | Check the command section for more info                                                        |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 7012 | Insufficient permissions for an specific experiment. | Check if you have enough permissions, experiment exist or specified expid has a typo           |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 7013 | Pending commits                                      | You must commit/synchronize pending changes in the experiment proj folder.                     |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 7014 | Wrong configuration                                  | Check your experiment/conf files, also take a look to the ASLOG/command.log detailed output    |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+

**Default Solution**

These issues are usually mistakes from the user input, check the available logs and git resolved issues. Alternative, you can ask for help to Autosubmit team.

----

Platform issues  - Critical Error codes. Local [7040-7050] and remote [7050-7060]
=================================================================================

+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Code | Details                                                         |   Solution                                                                                                                              |
+======+=================================================================+=========================================================================================================================================+
| 7040 | Invalid experiment pkl/db likely due a local platform failure   | Should be recovered automatically, if not check if there is a backup file and do it manually                                            |
+------+-----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+
| 7041 | Weird job status                                                | Weird Job status, try to recover experiment(check the recovery how-to for more info) if this issue persist please, report it to gitlab  |
+------+-----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+
| 7050 | Connection can't be established.                                | Check your experiment platform configuration                                                                                            |
+------+-----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+
| 7050 | Failure after a restart, connection can't be restored.          | Check or ask (manually) if the remote platforms have any known issues                                                                   |
+------+-----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+
| 7051 | Invalid ssh configuration.                                      | Check .ssh/config file. Additionally, Check if you can perform a password less connection to that platform.                             |
+------+-----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+
| 7052 | Scheduler is not installed or correctly configured.             | Check if there is a scheduler installed in the remote machine.                                                                          |
+------+-----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+

**Default Solution**

Check autosubmit log for detailed information, there will be additional error codes.

----

Uncatalogued codes  - Critical Error codes [7060+]
==================================================

+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Code | Details                                       | Solution                                                                                                                                                                         |
+======+===============================================+==================================================================================================================================================================================+
| 7060 |  Display issues during monitoring             | Use a different output or txt.                                                                                                                                                   |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7061 | Stat command failed                           | Check Aslogs command output, open a git issue.                                                                                                                                   |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7062 | Svn issues                                    | Check, in expdef, if url exist.                                                                                                                                                  |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7063 | cp/rsync issues                               | Check if destination path exist.                                                                                                                                                 |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7064 | Git issues                                    | Check that the proj folder is a well configured git folder. Also, check GIT: expdef config.                                                                                      |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7065 | Wrong git configuration                       | Invalid git url. Check GIT: expdef config. If issue persists, check if proj folder is a well configured git folder.                                                              |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7066 | Pre-submission feature issues                 | New feature, this message shouldn't be prompt. Please report it to Git.                                                                                                          |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7067 | Historical Database not found                 | Configure historicdb: PATH:<file_path>.                                                                                                                                          |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7068 | Monitor output can't be loaded                | Try another output method// Check if the experiment is reachable.                                                                                                                |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7069 | Monitor output format invalid                 | Try another output method.                                                                                                                                                       |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7070 | Bug in code                                   | Contact us via git/e-mail output.                                                                                                                                                |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7071 | AS can't run in this host                     | If you think that this is an error, check the .autosubmitrc and modify the allowed/forbidden directives.                                                                         |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7072 | Basic configuration not found                 | Administrator: run `autosubmit configure --advanced` or create a common file in /etc/autosubmitrc.                                                                               |
|      |                                               | User: run `autosubmit configure` or create a $HOME/.autosubmitrc. Following the skeleton of installation page                                                                    |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7073 | Private key is encrypted                      | Each Session: Add your key into the ssh agent. ex. ssh-add $HOME/.ssh/id_rsa, then launch autosubmit.                                                                            |
|      |                                               | Alternative: You can use a non-encrypted key, just make sure that nobody except you has access to the file.                                                                      |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7074 | Profiling process failed                      | You can find descriptive explanations in the log, as well as hints to solve the problem.                                                                                         |
+------+-----------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**Default Solution**

Check autosubmit log for detailed information, there will be additional error codes.

----

Minor errors  - Error codes [6000+]
===================================

+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| Code | Details                                              | Solution                                                                                       |
+======+======================================================+================================================================================================+
| 6001 |     Failed to retrieve log files                     | Automatically, if there aren't bigger issues                                                   |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6002 |     Failed reconnection                               | Automatically, if there aren't bigger issues                                                  |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6003 |     Failed connection, wrong configuration           | Check your platform.yml file                                                                   |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6004 |     Input output issues                              |  Automatically, if there aren't bigger issues                                                  |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6005 |     Unable to execute the command                    |  Automatically, if there aren't bigger issues                                                  |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6006 |     Failed command                                   |  Check err output for more info, command worked but some issue was detected                    |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6007 |     Broken sFTP connection                           |  Automatically, if there aren't bigger issues                                                  |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6008 |     Inconsistent/unexpected ,job status              |  Automatically, if there aren't bigger issues                                                  |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6009 |     Failed job checker                               | Automatically, if there aren't bigger issues                                                   |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6010 |     Corrupted job_list using backup                  | Automatically, if it fails, Perform mv <expid>/pkl/job_list_backup.pkl <expid>/pkl/job_list.pkl|
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6011 |     Incorrect mail notifier configuration            | Double check your mail configuration on job.yml (job status) and autosubmit.yml (email)        |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6012 |     Migrate , archive/unarchive I/O issues           | Check migrate how-to configuration                                                             |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6013 |     Configuration issues                             | Check log output for more info                                                                 |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6014 | Git Can't clone repository submodule                 | Check submodule url, perform a refresh                                                         |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6015 | Submission failed                                    | Automatically, if there aren't bigger issues                                                   |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
| 6016 | Temporal connection issues                           | Automatically, if there aren't bigger issues                                                   |
+------+------------------------------------------------------+------------------------------------------------------------------------------------------------+
