(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7305:function(e,l,t){Promise.resolve().then(t.bind(t,4824))},4824:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return q}});var n=t(7437),i=t(3890),a=t(2265),s=t(7665);class r{constructor(e,l,t,n,i){this.index=e,this.src=l,this.information=t,this.height=n,this.width=i}}var o=t(9222);async function d(e,l){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return await o.Z.get("".concat("","/views/").concat(e,"/media/").concat(l,"?&as_base64=").concat(t.toString())).then(e=>new r(e.data.index,e.data.src,e.data.information,e.data.height,e.data.width))}var c=t(2759),u=t(504);async function h(e,l){return await o.Z.post("".concat("","/views/").concat(e,"/filter"),l).then(e=>e.data)}async function x(e,l,t,n,i,a){return await o.Z.post("".concat("","/views/").concat(e,"/media"),{media_ids:l,page:null!==t?t:0,sort_column:void 0!==n?n:null,ascending:void 0!==i?i:null,filters:void 0!==a?a:null}).then(e=>e.data)}let m=e=>{let{filter:l,onRemove:t}=e;return(0,n.jsx)("div",{className:"pb-1",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{type:"button",className:"button rounded-l border border-e-0 border-gray-300  p-1 text-xs text-gray-900 ",children:[l.column," ",l.comparison," ",l.value]}),(0,n.jsx)("button",{type:"button",className:"button me-1 rounded-r  border border-gray-300 p-1 text-xs text-gray-900 ",onClick:t,children:(0,n.jsx)(u.G,{icon:c.NBC})})]})},"".concat(l.column).concat(l.comparison).concat(l.value))},g=()=>{let e=(0,i.Dv)(M),[l,t]=(0,i.KO)(R),s=(0,i.Dv)(P),r=(0,i.b9)(V),[o,d]=(0,a.useState)(),[c,u]=(0,a.useState)(),[g,v]=(0,a.useState)(),b=(0,i.b9)(J),f=(0,i.Dv)(T),[p,j]=(0,i.KO)(Y),[y,w]=(0,i.KO)(Z);(0,a.useEffect)(()=>{N()},[l]);let N=()=>{h(s,l).then(e=>{if(e){r(e);let l=[];if(e.forEach(e=>{l=[...l,...e.id]}),void 0!==y&&y.length>0){let e=l.filter(e=>y[0].includes(e));w([...y,e])}j({...p,page:0})}}).catch(e=>console.error(e)),"grid"===f&&void 0!==y&&y.length>0&&void 0!==y[y.length-1]&&y[y.length-1].length>0&&x(s,y[y.length-1],p.page,p.sortBy,p.asc,l).then(e=>{e&&b(e)}).catch(e=>console.error(e))},C=e=>{t(l=>l.filter(l=>l!==e))},k=e=>l=>{e(l.target.value)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex",children:null==l?void 0:l.map(e=>(0,n.jsx)(m,{filter:e,onRemove:()=>C(e)},e.column+e.comparison+e.value))}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"pe-0 ps-0 pt-1 lg:flex lg:h-8",children:[(0,n.jsx)("div",{className:"flex w-full border border-gray-300 px-2 lg:m-0 lg:my-0 lg:w-1/3 lg:rounded-s-md lg:border-e-0",children:(0,n.jsxs)("select",{defaultValue:"",className:"my-1 block grow text-xs text-gray-900 lg:my-0","aria-label":"Default select example",onChange:k(d),children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Column"}),null==e?void 0:e.columns.slice(2).filter(e=>"_y"!==e).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})}),(0,n.jsx)("div",{className:"lg:rounded-0 flex w-full border border-gray-300 px-2 lg:m-0 lg:my-0 lg:w-1/3 lg:border-e-0",children:(0,n.jsxs)("select",{defaultValue:"",className:"my-1 block grow text-xs text-gray-900 lg:my-0",onChange:k(u),children:[(0,n.jsx)("option",{value:"",children:"comparison"}),(0,n.jsx)("option",{value:">",children:">"}),(0,n.jsx)("option",{value:">=",children:"≥"}),(0,n.jsx)("option",{value:"<",children:"<"}),(0,n.jsx)("option",{value:"=<",children:"≤"}),(0,n.jsx)("option",{value:"=",children:"="}),(0,n.jsx)("option",{value:"!=",children:"≠"})]})}),(0,n.jsx)("input",{type:"text","aria-label":"Last name",placeholder:"...",className:"my-1 block w-full border border-gray-300 px-2 text-xs text-gray-900 lg:my-0  lg:w-1/3 lg:border-e-0",onChange:e=>v(e.target.value)}),(0,n.jsx)("button",{className:"button my-0 w-full border border-gray-300 bg-gray-100 text-xs text-gray-900 hover:text-blue-500 focus:border-blue-500  focus:ring-blue-500 lg:my-0 lg:w-1/3 lg:rounded-e-md",type:"button",onClick:()=>{if(g&&c&&o){let e={column:o,comparison:c,value:g};(null==l?void 0:l.some(l=>l.column===e.column&&l.comparison===e.comparison&&l.value===e.value))||t(l=>[...l,e])}},children:"Filter"})]})})]})};var v=t(8864),b=t.n(v);let f=b()(async()=>await Promise.all([t.e(934),t.e(22)]).then(t.bind(t,7022)),{loadableGenerated:{webpack:()=>[7022]},ssr:!1});var p=e=>{let{revision:l,handleHover:t,handleClick:s,handleSelect:r}=e,o=(0,i.Dv)(M),d=(0,i.Dv)(V);if(void 0===o||void 0===d)return(0,n.jsx)(n.Fragment,{});let[c,u]=(0,a.useState)({hovermode:"closest",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",xaxis:j(o),yaxis:{autorange:!0,showgrid:!0,showline:!1,title:{text:o.y,font:{color:"black",size:11}}},displayModeBar:!1,dragmode:"select",datarevision:l,autosize:!0,margin:{l:40,r:0,b:40,t:0,pad:0}}),[h,x]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{u(e=>({...e,xaxis:j(o),yaxis:{...e.yaxis,title:{text:o.y}},datarevision:l}))},[o,l]),(0,a.useEffect)(()=>{let e=()=>{u(e=>({...e,legend:{...e.legend,x:window.innerWidth<768?.5:void 0,xanchor:window.innerWidth<768?"center":void 0,y:window.innerWidth<768?1.1:void 0,yanchor:window.innerWidth<768?"bottom":void 0}}))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsx)("div",{className:"h-100 flex-column flex items-center justify-center text-center",style:{height:"477px"},children:(0,n.jsxs)("div",{role:"status",children:[(0,n.jsxs)("svg",{"aria-hidden":"true",className:"mr-2 h-8 w-8 animate-spin fill-orange-500 text-gray-200 dark:text-gray-200",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),(0,n.jsx)("span",{className:"sr-only",children:"Loading..."})]})}),(0,n.jsx)(f,{data:d,layout:c,revision:l,useResizeHandler:!0,style:{width:"100%",height:"100%"},config:{scrollZoom:!0,displayModeBar:!1},onRelayout:e=>{void 0!==e["xaxis.range[0]"]&&void 0!==e["xaxis.range[1]"]&&void 0!==e["yaxis.range[0]"]&&void 0!==e["yaxis.range[1]"]&&u(l=>({...l,xaxis:{...l.xaxis,range:[e["xaxis.range[0]"],e["xaxis.range[1]"]]},yaxis:{...l.yaxis,range:[e["yaxis.range[0]"],e["yaxis.range[1]"]]}}))},onInitialized:e=>{x(!1)},onHover:e=>{var l;return t(null===(l=e.points)||void 0===l?void 0:l[0].data.id[e.points[0].pointIndex])},onClick:e=>{var l;return s(null===(l=e.points)||void 0===l?void 0:l[0].data.id[e.points[0].pointIndex])},onSelected:e=>{if((null==e?void 0:e.points)&&e.points.length>0){let l=e.points.map(e=>d[e.curveNumber].id[e.pointIndex]);r(e.points&&l)}}})]})};function j(e){return"violin"!==e.type?{showgrid:!0,showline:!1,zeroline:!1,title:{text:e.x,font:{color:"black",size:11}},autorange:!0}:{tick0:0,dtick:2,tickvals:null!=e.colors&&Array.from({length:e.colors.length},(e,l)=>2*l),ticktext:e.colors,autorange:!0}}class y{width(){return this.xmax-this.xmin}height(){return this.ymax-this.ymin}constructor(e,l,t,n,i,a){this.xmin=e,this.ymin=l,this.xmax=t,this.ymax=n,this.color=i,this.label=a}}let w=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#0000FF","#00FF00","#FF0000","#00FFFF","#FF00FF","#FFFF00","#C0C0C0","#800000"];function N(e){(0,i.Dv)(P);let[l,t]=(0,a.useState)([]),[s,r]=(0,a.useState)({width:0,height:0,naturalWidth:0,naturalHeight:0}),[o,d]=(0,a.useState)([]),c=a.useRef(null);(0,a.useEffect)(()=>{if(void 0!==e.media&&null!=e.media.information&&null!=e.boundingBoxColumnIndex){let l=e.media.information[e.boundingBoxColumnIndex];if(null==l)return;let n=function(e){let l=JSON.parse(e),t=[];return l.forEach(e=>{let l=e.xmin,n=e.ymin,i=e.xmax,a=e.ymax;isNaN(l)||isNaN(n)||isNaN(i)||isNaN(a)||t.push(new y(l,n,i,a,e.color,e.label))}),t}(l);t(n)}},[e.media,e.boundingBoxColumnIndex]),a.useEffect(()=>{if(c.current){let l=c.current,t=l.offsetWidth,n=l.offsetHeight;if(1===e.columns){let e=function(e){let l=e.naturalWidth/e.naturalHeight,t=e.height*l,n=e.height;return t>e.width&&(t=e.width,n=e.width/l),{width:t,height:n}}(c.current);t=e.width,n=e.height}r({height:isNaN(n)?0:n,naturalWidth:isNaN(l.naturalWidth)?0:l.naturalWidth,naturalHeight:isNaN(l.naturalHeight)?0:l.naturalHeight,width:isNaN(t)?0:t})}},[e.media,e.columns,e.displayLabel]),(0,a.useEffect)(()=>{u()},[s]);let u=()=>{if(isNaN(s.width)||isNaN(s.height)||isNaN(s.naturalWidth)||isNaN(s.naturalHeight)||0===s.width||0===s.height||0===s.naturalHeight||0===s.naturalWidth)return;let t=l.map((l,t)=>{let{textLabel:i,rect:r,textRectangle:o}=function(l,t){let i;let a=(0,n.jsx)("rect",{x:t.xmin/s.naturalWidth*s.width,y:t.ymin/s.naturalHeight*s.height,width:(t.xmax-t.xmin)/s.naturalWidth*s.width,height:(t.ymax-t.ymin)/s.naturalHeight*s.height,stroke:null!=t.color?t.color:w[l%w.length],strokeWidth:"3",fill:"none"},l),r=(0,n.jsx)("rect",{x:t.xmin/s.naturalWidth*s.width,y:t.ymin/s.naturalHeight*s.height,width:(t.xmax-t.xmin)/s.naturalWidth*s.width,height:12,fill:null!=t.color?t.color:w[l%w.length]});return null!=t.label&&e.displayLabel&&(i=(0,n.jsx)("text",{x:t.xmin/s.naturalWidth*s.width+2,y:t.ymin/s.naturalHeight*s.height+10,fill:"white",className:"small",children:t.label})),{textLabel:i,rect:a,textRectangle:r}}(t,l);return(0,n.jsxs)(a.Fragment,{children:[r,null!=i?o:"",null!=i?i:""]},t)});d(t)};return void 0===e.media?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)("div",{className:"image--preview",children:[(0,n.jsx)("img",{src:e.media.src,ref:c,className:"sidebar-image",style:{objectFit:"contain",width:"100%"}}),null==e.boundingBoxColumnIndex&&void 0!==e.boundingBoxColumnIndex&&(0,n.jsx)("svg",{className:"sidebar-svg",width:s.width,height:s.height,children:o})]})}function C(){var e;let l=(0,i.Dv)(U),t=(0,i.Dv)(M);return void 0===l||void 0===t?(0,n.jsx)("div",{}):(0,n.jsx)("div",{className:"sidebar text-dark border-s-1 ms-1 w-full border-s border-gray-200 px-1 ps-2 lg:ps-0",children:(0,n.jsxs)("div",{className:"w-full",style:{display:"flex",flexDirection:"column",maxHeight:"calc(70vh - 35px)"},children:[(0,n.jsx)("div",{style:{maxHeight:"300px"},children:(0,n.jsx)(N,{media:l,boundingBoxColumnIndex:null!=t.bounding_box?t.columns.indexOf(t.bounding_box):void 0,displayLabel:!0})}),(0,n.jsx)("div",{className:"ps-2",style:{overflowY:"scroll",flexGrow:1},children:null===(e=l.information)||void 0===e?void 0:e.filter((e,l)=>l!==(null!=t.bounding_box?t.columns.indexOf(t.bounding_box):-1)).map((e,l)=>{var i;return i=t.columns.slice(2),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"border-b border-gray-300 text-gray-800",children:(0,n.jsx)("small",{children:i[l]})}),(0,n.jsx)("div",{children:(0,n.jsx)("small",{className:"text-gray-800",children:e})})]},l)})})]})})}function k(e){let{handleMediaIndices:l}=e,[t,s]=(0,i.KO)(V),r=(0,i.b9)(T),o=(0,i.b9)(A),c=(0,i.Dv)(M),u=(0,i.Dv)(P),[h,x]=(0,a.useState)(0),[m,v]=(0,i.KO)(U);function b(e){o(e),void 0!==e&&d(u,e,!1).then(e=>{v(e)})}(0,a.useEffect)(()=>{x(h+1)},[t]),(0,a.useEffect)(()=>{if(void 0===t||void 0!==m||0===t.length)return;let e=t.length>=2?2:0,l=t[e].id.length>=47?47:0;b(t[e].id[l])},[t]);let f=async e=>{null!=e&&null!=u&&d(u,e,!0).then(e=>{v(e),r("media")})};return void 0===c?(0,n.jsx)("div",{}):(0,n.jsxs)("div",{className:"flex h-screen",children:[(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsxs)("div",{className:"",children:[null!=c.title&&(0,n.jsx)("div",{className:"",children:c.title}),null!==u&&(0,n.jsx)(g,{}),(0,n.jsx)("div",{className:"bg-white",style:{height:"calc(100vh - 80px)"},children:(0,n.jsx)(p,{revision:h,handleHover:b,handleClick:f,handleSelect:e=>{e.length>0&&l(e)}})})]})}),(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(C,{})})]})}async function B(e){return await o.Z.get("".concat("","/views/").concat(e)).then(e=>({config:e.data.config,data:e.data.data}))}async function F(){return await o.Z.get("".concat("","/uuid")).then(e=>e.data)}function O(e){let l=(0,n.jsx)(n.Fragment,{});if(null!=e.showColumn&&null!=e.media.information){let t=e.infoColumns.slice(2).indexOf(e.showColumn);l=(0,n.jsx)("div",{className:"truncate",children:(0,n.jsx)("div",{children:(0,n.jsx)("small",{children:e.media.information[t]})})})}return(0,n.jsxs)("div",{onClick:()=>e.handleClick(e.media.index),onMouseEnter:()=>e.handleHover(e.media.index),children:[(0,n.jsx)(N,{media:e.media,boundingBoxColumnIndex:null!=e.boundingBoxColumn?e.infoColumns.indexOf(e.boundingBoxColumn):void 0,displayLabel:e.showBboxLabel,columns:e.columns}),l]},"".concat(e.media.index,"-").concat(e.media.src))}var D=t(7188);function S(e){let{handleBack:l}=e;return(0,n.jsx)("div",{className:"flex cursor-pointer items-center text-xs hover:text-blue-500",onClick:()=>l(),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(u.G,{icon:c.acZ,className:"pe-1 ps-1 hover:text-blue-500"}),"back"]})})}let E=b()(async()=>await Promise.all([t.e(934),t.e(22)]).then(t.bind(t,7022)),{loadableGenerated:{webpack:()=>[7022]},ssr:!1});function H(e){let{mediaIndices:l}=e,t=(0,i.Dv)(P),s=(0,i.Dv)(M),[r,d]=(0,a.useState)([]),c=null==s?void 0:s.columns.filter(e=>!["id","img_path"].includes(e)),[u,h]=(0,a.useState)(0),[x,m]=(0,a.useState)(null==c?void 0:c[0]),[g,v]=(0,i.KO)(R),b=e=>r.map(l=>{var t;return null===(t=l.information)||void 0===t?void 0:t[e]});return((0,a.useEffect)(()=>{void 0!==l&&void 0!==r&&r.length!==l.length&&o.Z.post("".concat("","/views/").concat(t,"/media-metadata"),{media_ids:l}).then(e=>{let l=e.data;d(l)})}),void 0===s||void 0===x||void 0===r)?(0,n.jsx)("div",{children:"Loading..."}):0===r.length?(0,n.jsx)("div",{}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"mt-2 rounded-s-md border border-gray-300 bg-gray-100 p-1 pe-2 ps-2 text-xs",children:"Show stats for"}),(0,n.jsx)("select",{className:"me-0 mt-2 grow rounded-e-md border border-l-0 border-gray-300 p-1 text-xs text-gray-900",onChange:e=>{h(e.target.selectedIndex),m(e.target.value)},value:x,children:null==c?void 0:c.map((e,l)=>(0,n.jsx)("option",{value:e,children:e},l))})]}),(0,n.jsx)("div",{children:((e,l)=>{let t=b(e);if(!t.every(e=>"string"==typeof e))return(0,n.jsx)(E,{data:[{type:"histogram",x:t}],layout:{font:{size:8},margin:{l:20,r:0,b:20,t:0},height:150},config:{displayModeBar:!1},onClick:t=>{!function(e,l,t){let n=e[0].pointIndices,i=b(t).filter((e,l)=>n.includes(l)),a=g.filter(e=>e.column!==l);v([...a,{column:l,comparison:">=",value:Math.min(...i)},{column:l,comparison:"<=",value:Math.max(...i)}])}(t.points,l,e)}});{let e={};t.forEach(l=>{e[l]=(e[l]||0)+1});let i=Object.entries(e).sort((e,l)=>l[1]-e[1]);return(0,n.jsx)(E,{data:[{type:"bar",x:i.map(e=>e[0]),y:i.map(e=>e[1])}],layout:{font:{size:8},margin:{l:20,r:20,b:50,t:0},height:150},config:{displayModeBar:!1},onClick:e=>{!function(e,l,t){let n=e[0].label,i=g.filter(e=>e.column!==l);v([...i,{column:l,comparison:"=",value:n}])}(e.points,l,0)}})}})(u,x)})]})}function L(e){let{gridValues:l,setGridValues:t}=e;return(0,n.jsx)("div",{className:"flex",children:(0,n.jsxs)("div",{className:"grow",children:[(0,n.jsx)("input",{className:"",type:"checkbox",value:"",id:"flexCheckDefault",checked:l.showBboxLabel,onChange:()=>{t({...l,showBboxLabel:!l.showBboxLabel})}}),(0,n.jsx)("label",{className:"",htmlFor:"flexCheckDefault",children:"Show bbox label"})]})})}function _(e){return(0,n.jsxs)("div",{className:"text-x flex grow items-center justify-between border-r border-gray-300 pe-2",role:"group","aria-label":"Basic example",children:[(0,n.jsx)("button",{type:"button",className:0!==e.page?"hover:text-blue-500":"",onClick:()=>{e.handlePage(e.page-1)},disabled:0===e.page,children:(0,n.jsx)(u.G,{icon:c.UXu})}),(0,n.jsxs)("button",{type:"button",className:"px-1",disabled:!0,children:[e.page+1," / ",e.maxPage+1]}),(0,n.jsx)("button",{type:"button",className:"hover:text-blue-500",onClick:()=>{e.handlePage(e.page+1)},disabled:e.page===e.maxPage,children:(0,n.jsx)(u.G,{icon:c.cLY})})]})}function I(e){let{columns:l,gridValues:t,setGridValues:i}=e;return(0,n.jsxs)("select",{className:"w-full text-xs",onChange:e=>i({...t,showColumnValue:e.target.value}),value:t.showColumnValue,children:[(0,n.jsx)("option",{value:"",defaultValue:"",children:"Show value"}),l.slice(2).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})}function W(e){let{columns:l,gridValues:t,handleSort:i}=e;return(0,n.jsxs)("div",{className:"flex text-xs",children:[(0,n.jsxs)("select",{name:"",className:"grow",onChange:e=>i(e.target.value,t.asc),value:t.sortBy,children:[(0,n.jsx)("option",{value:"",defaultValue:"",children:"Order by"}),l.slice(2).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsx)("button",{className:"",type:"button",onClick:()=>{i(t.sortBy,!t.asc)},children:(0,n.jsx)(u.G,{icon:t.asc?c.sHD:c.O7s})})]})}function z(e){let{back:l}=e,t=(0,i.Dv)(Z),s=void 0!==t?t[t.length-1]:[],r=(0,i.Dv)(P),o=(0,i.Dv)(M),h=(0,i.Dv)(R),m=(0,i.b9)(U),v=(0,i.b9)(A),b=(0,i.b9)(T),[f,p]=(0,i.KO)(J),[j,y]=(0,a.useState)(!1),[w,N]=(0,i.KO)(Y);function k(e){null!=e&&null!=r&&d(r,e,!0).then(e=>{m(e),b("media")})}function B(e){v(e),void 0!==e&&d(r,e,!1).then(e=>{m(e)})}function F(e,l){void 0!==s&&void 0!==r&&x(r,s,w.page,void 0===e?w.sortBy:e,void 0===l?w.asc:l).then(e=>{p(e)})}return(0,a.useEffect)(()=>{void 0!==o&&void 0!==r&&F(void 0,void 0)},[s]),void 0===o||void 0===w?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)("div",{className:"w-3/4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"grid w-full  grid-cols-1 border-b border-gray-300 pb-0 pe-2 pt-1 text-black lg:grid-cols-5\n            lg:rounded-md lg:border lg:pt-0\n                  ",children:["grid"!==o.type&&(0,n.jsx)("div",{className:"flex flex-row border-b border-gray-300 lg:border-b-0 lg:border-r",children:(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)("div",{className:"border-r pb-1 pe-1 pt-1",children:(0,n.jsx)(S,{handleBack:function(){void 0!==l&&l()}})}),(0,n.jsxs)("div",{className:"ms-2 flex items-center text-xs",children:[void 0!==s?s.length:0," ","selected"]})]})}),"grid"===o.type&&(0,n.jsx)("div",{}),(0,n.jsx)("div",{id:"grid-menu-order",className:"border-b border-gray-300 py-2 lg:border-b-0 lg:border-r lg:px-2 lg:py-0 lg:pe-2 lg:pt-1  ",children:(0,n.jsx)(W,{columns:o.columns,gridValues:w,handleSort:function(e,l){void 0!==o&&o.columns.includes(e)&&(N({...w,sortBy:e,asc:l}),F(e,l))}})}),null!=o.bounding_box&&(0,n.jsx)(L,{gridValues:w,setGridValues:N}),(0,n.jsx)("div",{id:"grid-menu-show-column",className:"border-b border-gray-300 py-2 lg:flex lg:items-center lg:border-b-0 lg:border-r lg:px-2 lg:py-0 lg:pe-2",children:(0,n.jsx)(I,{columns:o.columns,gridValues:w,setGridValues:N})}),(0,n.jsxs)("div",{id:"grid-menu-column-n",className:"flex flex-row items-center justify-center border-b border-gray-300 py-2 text-xs lg:border-b-0 lg:border-r lg:px-2 lg:py-0",children:[(0,n.jsx)(u.G,{icon:D.pL1,className:"me-1"}),(0,n.jsx)("div",{className:"flex grow items-center justify-center",children:(0,n.jsx)("input",{type:"range",className:"w-full",min:1,max:10,value:w.numberOfColumns,onChange:e=>(function(e){let l=parseInt(e.target.value);N({...w,numberOfColumns:l})})(e)})}),(0,n.jsx)(u.G,{icon:c.DaQ,className:"ms-1"})]}),(0,n.jsxs)("div",{className:"flex-column flex cursor-pointer justify-end ps-2 text-right",children:[(0,n.jsx)(_,{handlePage:e=>{N({...w,page:e}),x(r,s,e,w.sortBy,w.asc,h).then(e=>{p(e)})},maxPage:void 0!==s?Math.floor(s.length/50):0,page:void 0===w.page?0:w.page}),(0,n.jsx)("div",{onClick:()=>y(!j),className:" ms-2 flex items-center hover:text-blue-500",children:(0,n.jsx)(u.G,{icon:c.gee,title:"Show stats"})})]})]}),(0,n.jsx)("div",{children:j&&(0,n.jsx)("div",{className:"border-b",children:(0,n.jsx)(H,{mediaIndices:s})})}),(0,n.jsx)("div",{className:"pt-1",children:(0,n.jsx)(g,{})})]}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)("div",{className:"grid p-2 grid-cols-".concat(w.numberOfColumns&&w.numberOfColumns," gap-4"),style:{maxHeight:"calc(100vh - 80px)",overflowY:"scroll"},children:f.map(e=>(0,n.jsx)(O,{media:e,handleClick:k,handleHover:B,infoColumns:o.columns,columns:w.numberOfColumns,showColumn:w.showColumnValue,boundingBoxColumn:o.bounding_box,showBboxLabel:w.showBboxLabel},e.index))})})]}),(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(C,{})})]})}var G=t(1925);function K(e){let{back:l}=e,t=(0,i.Dv)(M),a=(0,i.Dv)(U);return(0,i.Dv)(P),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)("div",{className:"w-3/4",children:[(0,n.jsx)(S,{handleBack:function(){void 0!==l&&l()}}),(0,n.jsx)("div",{className:"p-2",children:void 0!==a&&function(e){let{media:l,scaleFactor:t,shapes:i}=e;return(0,n.jsx)("div",{style:{height:"calc(100vh - 80px)"},children:(0,n.jsx)(G.default,{media:l,scaleFactor:t,shapes:i})})}({media:a,scaleFactor:1,shapes:[]})})]}),(0,n.jsx)("div",{className:"w-1/4",children:void 0!==t&&void 0!==a&&(0,n.jsx)(C,{})})]})}b()(Promise.resolve().then(t.bind(t,1925)),{loadableGenerated:{webpack:()=>[1925]},ssr:!1});let V=(0,s.cn)(void 0),M=(0,s.cn)(void 0),P=(0,s.cn)("recent"),Z=(0,s.cn)([]),R=(0,s.cn)([]),Y=(0,s.cn)({sortBy:"",asc:!0,page:0,numberOfColumns:5,showColumnValue:void 0,showBboxLabel:!1}),A=(0,s.cn)(void 0),T=(0,s.cn)("plot"),U=(0,s.cn)(void 0),J=(0,s.cn)([]);function Q(e){let{uuidProp:l}=e,[t,s]=(0,i.KO)(P),r=(0,i.b9)(V),o=(0,i.b9)(M),[d,c]=(0,i.KO)(A),[u,x]=(0,i.KO)(T),[m,g]=(0,i.KO)(Z),[v,b]=(0,i.KO)(Y),f=(0,i.Dv)(R);function p(e){g([...m,e]),x("grid")}return(0,a.useEffect)(()=>{"recent"===l?F().then(e=>{console.log(e),s(e)}):s(l)},[l]),(0,a.useEffect)(()=>{B(t).then(e=>{let{config:l,data:n}=e;r(n),o(l),"grid"===l.type&&(x("grid"),h(t,f).then(e=>{if(e){let l=[];e.forEach(e=>{l=[...l,...e.id]}),g([...m,l])}}))})},[t]),function(){switch(u){case"plot":return(0,n.jsx)(k,{handleMediaIndices:p});case"grid":return(0,n.jsx)(z,{back:()=>{g([]),b({...v,page:0}),x("plot")}});case"media":if(void 0!==d)return(0,n.jsx)(K,{mediaIndex:d,back:()=>{c(void 0),void 0!==m&&m.length>0?x("grid"):x("plot")}});return(0,n.jsx)("div",{className:"text-black",children:"Loading.."});default:return(0,n.jsx)("div",{className:"text-black",children:"Loading.."})}}()}var X=t(2601);function q(){return(0,n.jsx)(i.zt,{children:(0,n.jsx)("div",{className:"m-2",children:(0,n.jsx)(Q,{uuidProp:"https://clusterfun.app"===X.env.BASE_URL?"8e6e40d8-8df2-44d6-b5a3-34594c50a504":"recent"})})})}},1925:function(e,l,t){"use strict";t.r(l);var n=t(7437),i=t(8864),a=t.n(i);let s=a()(async()=>await Promise.all([t.e(934),t.e(22)]).then(t.bind(t,7022)),{loadableGenerated:{webpack:()=>[7022]},ssr:!1});l.default=e=>{let{media:l,scaleFactor:t,shapes:i}=e;return(0,n.jsx)(s,{data:[{x:[0,null!=l.width?l.width*t:1e3],y:[0,null!=l.height?l.height*t:1e3],mode:"markers",marker:{opacity:0}}],layout:{dragmode:"pan",hovermode:"closest",yaxis:{showgrid:!1,showline:!1,zeroline:!1,showticklabels:!1,range:[0,null!=l.height?l.height*t:1e3],scaleanchor:"x"},xaxis:{showgrid:!1,showline:!1,zeroline:!1,showticklabels:!1,range:[0,null!=l.width?l.width*t:1e3]},images:[{x:0,sizex:null!=l.width?l.width*t:1e3,y:null!=l.height?l.height*t:1e3,sizey:null!=l.height?l.height*t:1e3,xref:"x",yref:"y",opacity:1,layer:"below",sizing:"stretch",source:l.src}],margin:{l:0,r:0,b:0,t:0,pad:0},shapes:null!=i?i:[]},config:{modeBarButtonsToRemove:["sendDataToCloud","autoScale2d","hoverClosestCartesian","hoverCompareCartesian","lasso2d","select2d","toImage"],responsive:!0,scrollZoom:!0},useResizeHandler:!0,style:{width:"100%",height:"100%"}})}}},function(e){e.O(0,[676,657,971,596,744],function(){return e(e.s=7305)}),_N_E=e.O()}]);