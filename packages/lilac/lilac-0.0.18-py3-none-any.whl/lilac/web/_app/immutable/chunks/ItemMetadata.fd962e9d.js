import{S as te,i as le,s as ne,k as C,a as Y,q as ie,e as P,l as D,m as R,h as v,c as X,r as ae,n as I,G as k,p as O,b as $,a0 as F,H as ce,v as q,d as S,f as B,g as p,u as re,W as de,X as ue,a2 as he,a3 as j,y as H,z as K,A as L,B as U,a4 as me,O as _e}from"./index.8706e7a3.js";import{$ as ge,an as pe,ab as T,aN as be,aO as ve,ay as ke,X as we,as as Se,az as ye,aF as Ee,bs as Ve,bt as $e}from"./Commands.0d29256a.js";import{s as G,C as Fe,a as Ie}from"./notificationsStore.2895bc3e.js";function W(r,e,l){const t=r.slice();return t[2]=e[l],t}function Pe(r){let e,l;return e=new Fe({}),{c(){H(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Ne(r){let e,l;return e=new Ie({}),{c(){H(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function J(r){var f;let e,l=(r[0].formattedValue||((f=r[0].children)!=null&&f.length?"":"n/a"))+"",t,n;return{c(){e=C("div"),t=ie(l),this.h()},l(i){e=D(i,"DIV",{title:!0,class:!0});var s=R(e);t=ae(s,l),s.forEach(v),this.h()},h(){var i,s;I(e,"title",n=(i=r[0].value)==null?void 0:i.toString()),I(e,"class","truncated text-right svelte-1woyz4e"),k(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(i,s){$(i,e,s),F(e,t)},p(i,s){var a,c,d;s&1&&l!==(l=(i[0].formattedValue||((a=i[0].children)!=null&&a.length?"":"n/a"))+"")&&re(t,l),s&1&&n!==(n=(c=i[0].value)==null?void 0:c.toString())&&I(e,"title",n),s&1&&k(e,"italic",!i[0].formattedValue&&!((d=i[0].children)!=null&&d.length))},d(i){i&&v(e)}}}function Q(r){let e,l=[],t=new Map,n,f,i=r[0].children;const s=a=>ge(a[2].path);for(let a=0;a<i.length;a+=1){let c=W(r,i,a),d=s(c);t.set(d,l[a]=Z(d,c))}return{c(){e=C("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=D(a,"DIV",{});var c=R(e);for(let d=0;d<l.length;d+=1)l[d].l(c);c.forEach(v),this.h()},h(){k(e,"bg-blue-100",r[0].isSignal),k(e,"bg-emerald-100",r[0].isPreviewSignal)},m(a,c){$(a,e,c);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);f=!0},p(a,c){c&1&&(i=a[0].children,q(),l=de(l,c,s,1,a,i,t,e,ue,Z,null,W),B()),(!f||c&1)&&k(e,"bg-blue-100",a[0].isSignal),(!f||c&1)&&k(e,"bg-emerald-100",a[0].isPreviewSignal)},i(a){if(!f){for(let c=0;c<i.length;c+=1)p(l[c]);a&&he(()=>{f&&(n||(n=j(e,G,{},!0)),n.run(1))}),f=!0}},o(a){for(let c=0;c<l.length;c+=1)S(l[c]);a&&(n||(n=j(e,G,{},!1)),n.run(0)),f=!1},d(a){a&&v(e);for(let c=0;c<l.length;c+=1)l[c].d();a&&n&&n.end()}}}function Z(r,e){let l,t,n;return t=new oe({props:{node:e[2]}}),{key:r,first:null,c(){l=P(),H(t.$$.fragment),this.h()},l(f){l=P(),K(t.$$.fragment,f),this.h()},h(){this.first=l},m(f,i){$(f,l,i),L(t,f,i),n=!0},p(f,i){e=f;const s={};i&1&&(s.node=e[2]),t.$set(s)},i(f){n||(p(t.$$.fragment,f),n=!0)},o(f){S(t.$$.fragment,f),n=!1},d(f){f&&v(l),U(t,f)}}}function Ae(r){var w;let e,l,t,n,f,i,s=r[0].fieldName+"",a,c,d,g,_,y,N;const A=[Ne,Pe],b=[];function z(o,u){return o[0].expanded?0:1}t=z(r),n=b[t]=A[t](r);let m=(r[0].formattedValue||!((w=r[0].children)!=null&&w.length))&&J(r),h=r[0].children&&r[0].expanded&&Q(r);return{c(){e=C("div"),l=C("button"),n.c(),f=Y(),i=C("div"),a=ie(s),c=Y(),m&&m.c(),d=Y(),h&&h.c(),g=P(),this.h()},l(o){e=D(o,"DIV",{class:!0});var u=R(e);l=D(u,"BUTTON",{class:!0});var V=R(l);n.l(V),V.forEach(v),f=X(u),i=D(u,"DIV",{class:!0});var E=R(i);a=ae(E,s),E.forEach(v),c=X(u),m&&m.l(u),u.forEach(v),d=X(o),h&&h.l(o),g=P(),this.h()},h(){var o;I(l,"class","p-1"),k(l,"invisible",!((o=r[0].children)!=null&&o.length)),I(i,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),O(i,"min-width","10ch"),I(e,"class","flex items-center gap-x-1 pr-2 text-xs"),k(e,"bg-blue-100",r[0].isSignal),k(e,"bg-emerald-100",r[0].isPreviewSignal),O(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),O(e,"line-height","1.7rem")},m(o,u){$(o,e,u),F(e,l),b[t].m(l,null),F(e,f),F(e,i),F(i,a),F(e,c),m&&m.m(e,null),$(o,d,u),h&&h.m(o,u),$(o,g,u),_=!0,y||(N=ce(l,"click",r[1]),y=!0)},p(o,[u]){var E,M;let V=t;t=z(o),t!==V&&(q(),S(b[V],1,1,()=>{b[V]=null}),B(),n=b[t],n||(n=b[t]=A[t](o),n.c()),p(n,1),n.m(l,null)),(!_||u&1)&&k(l,"invisible",!((E=o[0].children)!=null&&E.length)),(!_||u&1)&&s!==(s=o[0].fieldName+"")&&re(a,s),o[0].formattedValue||!((M=o[0].children)!=null&&M.length)?m?m.p(o,u):(m=J(o),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!_||u&1)&&k(e,"bg-blue-100",o[0].isSignal),(!_||u&1)&&k(e,"bg-emerald-100",o[0].isPreviewSignal),u&1&&O(e,"padding-left",.25+(o[0].path.length-1)*.5+"rem"),o[0].children&&o[0].expanded?h?(h.p(o,u),u&1&&p(h,1)):(h=Q(o),h.c(),p(h,1),h.m(g.parentNode,g)):h&&(q(),S(h,1,1,()=>{h=null}),B())},i(o){_||(p(n),p(h),_=!0)},o(o){S(n),S(h),_=!1},d(o){o&&v(e),b[t].d(),m&&m.d(),o&&v(d),h&&h.d(o),o&&v(g),y=!1,N()}}}function se(r){r.expanded=!0,r.children&&r.children.forEach(se)}function Ce(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&se(t),l(0,t)};return r.$$set=f=>{"node"in f&&l(0,t=f.node)},[t,n]}class oe extends te{constructor(e){super(),le(this,e,Ce,Ae,ne,{node:0})}}function x(r,e,l){const t=r.slice();return t[7]=e[l],t}function ee(r){let e,l;return e=new oe({props:{node:r[7]}}),{c(){H(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){L(e,t,n),l=!0},p(t,n){const f={};n&1&&(f.node=t[7]),e.$set(f)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function De(r){let e,l,t=r[0].children||[],n=[];for(let i=0;i<t.length;i+=1)n[i]=ee(x(r,t,i));const f=i=>S(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=P()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=P()},m(i,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,s);$(i,e,s),l=!0},p(i,[s]){if(s&1){t=i[0].children||[];let a;for(a=0;a<t.length;a+=1){const c=x(i,t,a);n[a]?(n[a].p(c,s),p(n[a],1)):(n[a]=ee(c),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(q(),a=t.length;a<n.length;a+=1)f(a);B()}},i(i){if(!l){for(let s=0;s<t.length;s+=1)p(n[s]);l=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)S(n[s]);l=!1},d(i){me(n,i),i&&v(e)}}}function Re(r,e,l){let t,n,{row:f}=e,{selectRowsSchema:i=void 0}=e,{highlightedFields:s}=e;const a=pe();_e(r,a,d=>l(5,n=d));function c(d){var h;const g=T.field(d),_=T.path(d);let y=T.value(d);if(g.dtype==="string_span"){const w=[];for(let o=_.length-1;o>=0;o--){const u=_.slice(0,o);if(be(i.schema,u).dtype==="string"){const E=T.value(ve(f,u)),{start:M,end:fe}=y;w.push(E.slice(M,fe));break}}y=w}const N=((h=n.data)==null?void 0:h.some(w=>{var o;return w.name===((o=g.signal)==null?void 0:o.signal_name)}))||!1,A=ke(g);let b;N||A&&g.dtype==null||g.dtype==="embedding"||g.repeated_field!=null?b="":y==null?b=null:b=we(y);function z(w){const{[Ee]:o,[Ve]:u,[$e]:V,...E}=w;return Object.values(E)}const m=s.some(w=>Se(w.path,_));return{children:Array.isArray(d)?d.map(c):z(d).map(c),fieldName:_[_.length-1],field:g,path:_,expanded:m,isSignal:A,isPreviewSignal:i!=null?ye(i,_):!1,isEmbeddingSignal:N,value:y,formattedValue:b}}return r.$$set=d=>{"row"in d&&l(2,f=d.row),"selectRowsSchema"in d&&l(3,i=d.selectRowsSchema),"highlightedFields"in d&&l(4,s=d.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(f))},[t,a,f,i,s]}class Te extends te{constructor(e){super(),le(this,e,Re,De,ne,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{Te as I};
