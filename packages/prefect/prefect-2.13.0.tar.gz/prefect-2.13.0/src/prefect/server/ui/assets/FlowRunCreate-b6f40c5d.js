import{aY as v,d as g,v as b,M as k,V as N,R as S,af as T,c as x,b as D,u as e,e as F,w as m,g as I,o as B,j as p,aZ as J,a_ as M,a$ as O,b0 as V,ab as d,aW as i}from"./index-af9a0126.js";import{u as z}from"./usePageTitle-f8d5ba55.js";class P extends v{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const j=g({__name:"FlowRunCreate",setup(f){const t=b(),n=k("deploymentId"),s=N(),y=S("parameters",P,void 0),{deployment:a}=T(n),_=async r=>{var l,o;try{const u=await t.deployments.createDeploymentFlowRun(n.value,r),c=((o=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:o.scheduledTime)??void 0,C=!c,h=O(V,{flowRun:u,flowRunRoute:d.flowRun,router:s,immediate:C,startTime:c});i(h,"success"),s.push(d.deployment(n.value))}catch(u){i("Something went wrong trying to create a flow run","error"),console.error(u)}},R=()=>{s.back()},w=x(()=>a.value?`Create Flow Run for Deployment: ${a.value.name}`:"Create Flow Run for Deployment");return z(w),(r,l)=>{const o=D("p-layout-default");return e(a)?(B(),F(o,{key:0},{header:m(()=>[p(e(J),{deployment:e(a)},null,8,["deployment"])]),default:m(()=>[p(e(M),{deployment:e(a),parameters:e(y),onSubmit:_,onCancel:R},null,8,["deployment","parameters"])]),_:1})):I("",!0)}}});export{j as default};
